<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MODUL PTT1 2026 äº’åŠ¨æäº¤ç‰ˆ</title>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        :root { --blue: #3498db; --green: #2ecc71; --red: #e74c3c; }
        body { font-family: sans-serif; background: #f4f7f6; margin: 0; padding: 10px; }
        #capture-area { background: #f4f7f6; padding: 15px; border-radius: 10px; }
        .card { background: white; border-radius: 12px; padding: 15px; margin-bottom: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        h1 { font-size: 18px; text-align: center; color: #2c3e50; border-bottom: 2px solid var(--blue); padding-bottom: 10px; }
        
        .info-input { width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 8px; box-sizing: border-box; font-size: 16px; margin-bottom: 10px; }

        /* ç¬”ç”»ç¤ºèŒƒå›¾æ ·å¼ */
        .stroke-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .stroke-box { text-align: center; }
        .demo-img { height: 60px; background: #fff9db; border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-bottom: 5px; border: 1px solid #ffeaa7; }
        .bh-text { font-size: 45px; color: var(--red); font-family: "KaiTi", "æ¥·ä½“"; line-height: 1; }
        
        .canvas-box { border: 2px solid #eee; border-radius: 8px; background: #fff; touch-action: none; width: 100%; aspect-ratio: 1/1; }
        canvas { width: 100%; height: 100%; }

        /* ç»ƒä¹ 4 & 5 */
        .n-opt { display: inline-block; width: 30px; height: 30px; border: 1px solid #ccc; border-radius: 50%; text-align: center; line-height: 30px; margin: 0 5px; }
        .n-opt.selected { background: var(--green); color: white; border-color: var(--green); }
        .count-zone { background: #eef2f7; padding: 10px; border-radius: 8px; text-align: center; font-size: 20px; letter-spacing: 3px; }

        /* æŒ‰é’® */
        .btn-main { background: var(--green); color: white; border: none; padding: 15px; border-radius: 8px; width: 100%; font-size: 18px; font-weight: bold; margin-top: 10px; }
        .btn-clear { background: #bdc3c7; color: white; border: none; padding: 3px 8px; border-radius: 4px; font-size: 11px; margin-top: 3px; }
    </style>
</head>
<body>

<div id="capture-area">
    <div style="text-align:right; font-size:10px; color:#ccc;">ID: PTT1-2026</div>
    <h1>MODUL PTT1 SESI 2026</h1>

    <div class="card">
        <input type="text" class="info-input" placeholder="è¾“å…¥å­¦ç”Ÿå§“å (Nama Student)">
    </div>

    <div class="card">
        <p><strong>1. ç”»è›‹ç³•å¹¶ç‚¹é€‰ç”Ÿæ—¥æœˆä»½ï¼š</strong></p>
        <div class="canvas-box" style="aspect-ratio: 1.6/1;"><canvas id="c_cake"></canvas></div>
        <button class="btn-clear" onclick="clearC('c_cake')">æ¸…é™¤</button>
        <div style="display:grid; grid-template-columns:repeat(4,1fr); gap:5px; margin-top:10px;">
            <script>
                for(let i=1; i<=12; i++) document.write(`<div style="border:1px solid #eee; font-size:11px; text-align:center; padding:5px; border-radius:4px;" onclick="this.style.background='#ffeaa7'">${i}æœˆ</div>`);
            </script>
        </div>
    </div>

    <div class="card">
        <p><strong>2 & 3. ç¬”ç”»ç»ƒä¹  (è·Ÿç€ä¾‹å­å†™)ï¼š</strong></p>
        <div class="stroke-grid">
            <div class="stroke-box">
                <div class="demo-img"><span class="bh-text">ã‡€</span></div>
                <small>æ (tÃ­)</small>
                <div class="canvas-box"><canvas id="c_ti"></canvas></div>
                <button class="btn-clear" onclick="clearC('c_ti')">æ¸…é™¤</button>
            </div>
            <div class="stroke-box">
                <div class="demo-img"><span class="bh-text">äº…</span></div>
                <small>ç«–é’© (shÃ¹ gÅu)</small>
                <div class="canvas-box"><canvas id="c_sg"></canvas></div>
                <button class="btn-clear" onclick="clearC('c_sg')">æ¸…é™¤</button>
            </div>
            <div class="stroke-box">
                <div class="demo-img"><span class="bh-text">ã‡•</span></div>
                <small>æ¨ªæŠ˜ (hÃ©ng zhÃ©)</small>
                <div class="canvas-box"><canvas id="c_hz"></canvas></div>
                <button class="btn-clear" onclick="clearC('c_hz')">æ¸…é™¤</button>
            </div>
            <div class="stroke-box">
                <div class="demo-img"><span class="bh-text">ã‡„</span></div>
                <small>ç«–æ (shÃ¹ tÃ­)</small>
                <div class="canvas-box"><canvas id="c_st"></canvas></div>
                <button class="btn-clear" onclick="clearC('c_st')">æ¸…é™¤</button>
            </div>
        </div>
    </div>

    <div class="card">
        <p><strong>4. æ•°ä¸€æ•°å¹¶å½©ä¸Šæ­£ç¡®ç­”æ¡ˆï¼š</strong></p>
        <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
            <span>â­â­â­â­</span>
            <div>é€‰æ‹©ï¼š<span class="n-opt" onclick="this.classList.toggle('selected')">2</span><span class="n-opt" onclick="this.classList.toggle('selected')">4</span></div>
        </div>
        <div style="display:flex; justify-content:space-between;">
            <span>ğŸğŸğŸğŸğŸğŸ</span>
            <div>é€‰æ‹©ï¼š<span class="n-opt" onclick="this.classList.toggle('selected')">6</span><span class="n-opt" onclick="this.classList.toggle('selected')">3</span></div>
        </div>
    </div>

    <div class="card">
        <p><strong>5. æ•°ä¸€æ•°å¹¶åœ¨ç›’å­é‡Œå†™æ•°å­—ï¼š</strong></p>
        <div class="count-zone">ğŸŒ¸ğŸŒ¸ğŸŒ¸ | ğŸ¦ğŸ¦ğŸ¦ğŸ¦ | ğŸŒğŸŒ | ğŸ°ğŸ°ğŸ°</div>
        <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-top:10px; font-size:13px;">
            <div>ğŸŒ¸: <input type="number" style="width:40px;"></div>
            <div>ğŸ¦: <input type="number" style="width:40px;"></div>
            <div>ğŸŒ: <input type="number" style="width:40px;"></div>
            <div>ğŸ°: <input type="number" style="width:40px;"></div>
        </div>
    </div>
    
    <div style="text-align:center; font-size:10px; color:#eee;">
        <img src="https://profile-counter.glitch.me/PTT1_2026_STUDY/count.svg">
    </div>
</div>

<button class="btn-main" onclick="downloadImage()">å®Œæˆä½œä¸š (è‡ªåŠ¨ä¿å­˜åˆ°æ‰‹æœº)</button>
<p style="text-align:center; font-size:12px; color:#888;">ç‚¹å‡»åè¯·åœ¨å¼¹çª—ä¸­é€‰æ‹©â€œä¸‹è½½â€å›¾ç‰‡</p>

<script>
    function setupC(id) {
        const c = document.getElementById(id); const ctx = c.getContext('2d');
        const r = c.parentNode.getBoundingClientRect();
        c.width = r.width; c.height = r.height;
        let drawing = false;
        const getPos = (e) => {
            const rect = c.getBoundingClientRect();
            const cx = e.touches ? e.touches[0].clientX : e.clientX;
            const cy = e.touches ? e.touches[0].clientY : e.clientY;
            return { x: cx - rect.left, y: cy - rect.top };
        };
        const start = (e) => { drawing = true; draw(e); };
        const stop = () => { drawing = false; ctx.beginPath(); };
        const draw = (e) => {
            if(!drawing) return; e.preventDefault();
            const p = getPos(e);
            ctx.lineWidth = 4; ctx.lineCap = 'round'; ctx.strokeStyle = '#000';
            ctx.lineTo(p.x, p.y); ctx.stroke(); ctx.beginPath(); ctx.moveTo(p.x, p.y);
        };
        c.addEventListener('touchstart', start); c.addEventListener('touchmove', draw); c.addEventListener('touchend', stop);
        c.addEventListener('mousedown', start); c.addEventListener('mousemove', draw); window.addEventListener('mouseup', stop);
    }

    function clearC(id) {
        const c = document.getElementById(id);
        c.getContext('2d').clearRect(0,0,c.width,c.height);
    }

    // æ ¸å¿ƒåŠŸèƒ½ï¼šè‡ªåŠ¨ç”Ÿæˆå¹¶ä¸‹è½½å›¾ç‰‡
    function downloadImage() {
        const btn = document.querySelector('.btn-main');
        btn.innerText = "æ­£åœ¨ç”Ÿæˆä¸­...";
        
        html2canvas(document.querySelector("#capture-area"), { useCORS: true }).then(canvas => {
            const link = document.createElement('a');
            link.download = 'Student_Homework.png';
            link.href = canvas.toDataURL("image/png");
            link.click(); // æ¨¡æ‹Ÿç‚¹å‡»ä¸‹è½½
            
            btn.innerText = "å®Œæˆä½œä¸š (è‡ªåŠ¨ä¿å­˜åˆ°æ‰‹æœº)";
            alert("å›¾ç‰‡å·²å°è¯•ä¿å­˜ï¼å¦‚æœæ²¡çœ‹åˆ°ï¼Œè¯·æŸ¥çœ‹æµè§ˆå™¨çš„â€œä¸‹è½½â€è®°å½•æˆ–é•¿æŒ‰å›¾ç‰‡ä¿å­˜ã€‚");
        });
    }

    window.onload = () => { ['c_cake','c_ti','c_sg','c_hz','c_st'].forEach(setupC); };
</script>

</body>
</html>
