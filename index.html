<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MODUL PTT1 2026 - å®Œæ•´ä¿®æ­£ç‰ˆ</title>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        :root { --blue: #3498db; --green: #2ecc71; --red: #e74c3c; }
        body { font-family: sans-serif; background: #f4f7f6; margin: 0; padding: 10px; }
        #capture-area { background: #f4f7f6; padding: 15px; border-radius: 10px; }
        .card { background: white; border-radius: 12px; padding: 15px; margin-bottom: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        h1 { font-size: 18px; text-align: center; color: #2c3e50; border-bottom: 2px solid var(--blue); padding-bottom: 10px; }
        .info-input { width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 8px; box-sizing: border-box; font-size: 16px; margin-bottom: 10px; }

        /* ç¬”ç”»ç¤ºèŒƒå›¾ */
        .stroke-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .demo-img { height: 70px; background: #fff9db; border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-bottom: 5px; border: 1px solid #ffeaa7; }
        .stroke-svg { width: 50px; height: 50px; }
        
        .canvas-box { border: 2px solid #eee; border-radius: 8px; background: #fff; touch-action: none; width: 100%; aspect-ratio: 1/1; }
        canvas { width: 100%; height: 100%; }

        /* å˜è‰²æŒ‰é’® */
        .count-row { display: flex; align-items: center; justify-content: space-between; padding: 12px 0; border-bottom: 1px dashed #eee; }
        .opt-btn { width: 45px; height: 45px; border: 2px solid #ddd; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-weight: bold; }
        .opt-btn.active { background: var(--green); color: white; border-color: var(--green); }

        .btn-main { background: var(--green); color: white; border: none; padding: 18px; border-radius: 10px; width: 100%; font-size: 18px; font-weight: bold; margin-top: 10px; }
        .btn-clear { background: #bdc3c7; color: white; border: none; padding: 4px 10px; border-radius: 4px; font-size: 11px; margin-top: 5px; }
        
        .visitor-box { text-align: center; background: #333; color: white; padding: 5px; border-radius: 5px; margin-bottom: 10px; font-size: 12px; }
    </style>
</head>
<body>

<div id="capture-area">
    <div class="visitor-box">
        è®¿å®¢ç»Ÿè®¡ï¼š<img src="https://profile-counter.glitch.me/PTT1_STUDY_2026/count.svg" style="vertical-align: middle;">
    </div>

    <h1>MODUL PTT1 SESI 2026</h1>

    <div class="card">
        <input type="text" class="info-input" placeholder="è¾“å…¥å§“å (Nama Student)">
    </div>

    <div class="card">
        <p><strong>1. ç”»ä¸€ç”»å¹¶ç‚¹é€‰å‡ºç”Ÿæœˆä»½ï¼š</strong></p>
        <div class="canvas-box" style="aspect-ratio: 1.6/1;"><canvas id="c_cake"></canvas></div>
        <button class="btn-clear" onclick="clearC('c_cake')">æ¸…é™¤é‡ç”»</button>
        <div style="display:grid; grid-template-columns:repeat(4,1fr); gap:5px; margin-top:10px;">
            <script>
                const mths = ["ä¸€æœˆ","äºŒæœˆ","ä¸‰æœˆ","å››æœˆ","äº”æœˆ","å…­æœˆ","ä¸ƒæœˆ","å…«æœˆ","ä¹æœˆ","åæœˆ","åä¸€æœˆ","åäºŒæœˆ"];
                mths.forEach(m => document.write(`<div style="border:1px solid #eee; font-size:11px; text-align:center; padding:5px; border-radius:4px;" onclick="this.style.background='#ffeaa7'">${m}</div>`));
            </script>
        </div>
    </div>

    <div class="card">
        <p><strong>2 & 3. ç¬”ç”»ç»ƒä¹  (è·Ÿç€çº¢è‰²ä¾‹å­å†™)ï¼š</strong></p>
        <div class="stroke-grid">
            <div class="stroke-box">
                <div class="demo-img"><svg class="stroke-svg" viewBox="0 0 100 100"><path d="M25 75 L75 35 M65 35 L75 35 L75 45" stroke="#e74c3c" stroke-width="8" fill="none" stroke-linecap="round"/></svg></div>
                <small>æ (tÃ­)</small>
                <div class="canvas-box"><canvas id="c_ti"></canvas></div>
                <button class="btn-clear" onclick="clearC('c_ti')">æ“¦é™¤</button>
            </div>
            <div class="stroke-box">
                <div class="demo-img"><svg class="stroke-svg" viewBox="0 0 100 100"><path d="M50 20 L50 80 L35 65" stroke="#e74c3c" stroke-width="8" fill="none" stroke-linecap="round"/></svg></div>
                <small>ç«–é’© (shÃ¹ gÅu)</small>
                <div class="canvas-box"><canvas id="c_sg"></canvas></div>
                <button class="btn-clear" onclick="clearC('c_sg')">æ“¦é™¤</button>
            </div>
            <div class="stroke-box">
                <div class="demo-img"><svg class="stroke-svg" viewBox="0 0 100 100"><path d="M20 35 L80 35 L80 80" stroke="#e74c3c" stroke-width="8" fill="none" stroke-linecap="round"/></svg></div>
                <small>æ¨ªæŠ˜ (hÃ©ng zhÃ©)</small>
                <div class="canvas-box"><canvas id="c_hz"></canvas></div>
                <button class="btn-clear" onclick="clearC('c_hz')">æ“¦é™¤</button>
            </div>
            <div class="stroke-box">
                <div class="demo-img"><svg class="stroke-svg" viewBox="0 0 100 100"><path d="M35 20 L35 80 L75 50" stroke="#e74c3c" stroke-width="8" fill="none" stroke-linecap="round"/></svg></div>
                <small>ç«–æ (shÃ¹ tÃ­)</small>
                <div class="canvas-box"><canvas id="c_st"></canvas></div>
                <button class="btn-clear" onclick="clearC('c_st')">æ“¦é™¤</button>
            </div>
        </div>
    </div>

    <div class="card">
        <p><strong>4. æ•°ä¸€æ•°å¹¶ç‚¹é€‰æ­£ç¡®ç­”æ¡ˆï¼š</strong></p>
        <div class="count-row"><span>â­â­</span><div style="display:flex;gap:10px;"><div class="opt-btn" onclick="act(this)">2</div><div class="opt-btn" onclick="act(this)">3</div></div></div>
        <div class="count-row"><span>ğŸğŸğŸğŸğŸğŸ</span><div style="display:flex;gap:10px;"><div class="opt-btn" onclick="act(this)">6</div><div class="opt-btn" onclick="act(this)">4</div></div></div>
        <div class="count-row"><span>ğŸğŸğŸğŸğŸ</span><div style="display:flex;gap:10px;"><div class="opt-btn" onclick="act(this)">7</div><div class="opt-btn" onclick="act(this)">5</div></div></div>
    </div>

    <div class="card">
        <p><strong>5. æ•°ä¸€æ•°å¹¶å†™å‡ºæ•°å­—ï¼š</strong></p>
        <div style="background:#f0f4f8; padding:15px; border-radius:10px; text-align:center; font-size:22px; line-height:2;">
            ğŸŒ¸ğŸŒ¸ğŸŒ¸ğŸŒ¸<br>ğŸ¦ğŸ¦ğŸ¦<br>ğŸŒğŸŒğŸŒğŸŒğŸŒ
        </div>
        <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-top:10px;">
            <div style="background:#fff; padding:10px; border:1px solid #ddd; border-radius:5px;">ğŸŒ¸: <input type="number" style="width:40px;"></div>
            <div style="background:#fff; padding:10px; border:1px solid #ddd; border-radius:5px;">ğŸ¦: <input type="number" style="width:40px;"></div>
            <div style="background:#fff; padding:10px; border:1px solid #ddd; border-radius:5px;">ğŸŒ: <input type="number" style="width:40px;"></div>
        </div>
    </div>
</div>

<button class="btn-main" onclick="saveAsImg()">å®Œæˆä½œä¸š (è‡ªåŠ¨ä¿å­˜/ä¸‹è½½)</button>

<script>
    function setupCanvas(id) {
        const c = document.getElementById(id); const ctx = c.getContext('2d');
        const r = c.parentNode.getBoundingClientRect();
        c.width = r.width; c.height = r.height;
        let drawing = false;
        const getP = (e) => {
            const rect = c.getBoundingClientRect();
            const cx = e.touches ? e.touches[0].clientX : e.clientX;
            const cy = e.touches ? e.touches[0].clientY : e.clientY;
            return { x: cx - rect.left, y: cy - rect.top };
        };
        const start = (e) => { drawing = true; draw(e); };
        const end = () => { drawing = false; ctx.beginPath(); };
        const draw = (e) => {
            if(!drawing) return; e.preventDefault();
            const p = getP(e);
            ctx.lineWidth = 4; ctx.lineCap = 'round'; ctx.strokeStyle = '#2c3e50';
            ctx.lineTo(p.x, p.y); ctx.stroke(); ctx.beginPath(); ctx.moveTo(p.x, p.y);
        };
        c.addEventListener('touchstart', start); c.addEventListener('touchmove', draw); c.addEventListener('touchend', end);
        c.addEventListener('mousedown', start); c.addEventListener('mousemove', draw); window.addEventListener('mouseup', end);
    }

    function clearC(id) { document.getElementById(id).getContext('2d').clearRect(0,0,1000,1000); }
    function act(el) { Array.from(el.parentElement.children).forEach(b => b.classList.remove('active')); el.classList.add('active'); }

    function saveAsImg() {
        html2canvas(document.querySelector("#capture-area")).then(canvas => {
            const link = document.createElement('a');
            link.download = 'My_Modul_PTT1.png';
            link.href = canvas.toDataURL();
            link.click();
            alert("æ­£åœ¨ä¿å­˜å›¾ç‰‡ï¼Œè¯·æŸ¥çœ‹æ‰‹æœºä¸‹è½½ç®¡ç†æˆ–ç›¸å†Œã€‚");
        });
    }

    window.onload = () => { ['c_cake','c_ti','c_sg','c_hz','c_st'].forEach(setupCanvas); };
</script>
</body>
</html>
